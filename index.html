<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tu Estado Financiero</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    h2 {
      margin-top: 40px;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input {
      margin-bottom: 10px;
    }
    .ratio {
      margin-top: 20px;
      font-weight: bold;
    }
    .good {
      color: green;
    }
    .bad {
      color: red;
    }
    .explanation {
      font-style: italic;
      font-size: 0.9em;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <h1>Tu Estado Financiero</h1>
  <p>Introduce tus datos y descubre tu salud financiera en segundos.</p>

  <form id="finanzasForm">
    <h2>Ingresos</h2>
    <label>Ingreso mensual fijo: <input type="number" id="ingresoFijo" required></label>
    <label>Ingreso mensual variable: <input type="number" id="ingresoVariable"></label>
    <label>Ingresos pasivos: <input type="number" id="ingresosPasivos"></label>

    <h2>Gastos mensuales</h2>
    <label>Vivienda: <input type="number" id="vivienda"></label>
    <label>Suministros: <input type="number" id="suministros"></label>
    <label>Alimentación: <input type="number" id="alimentacion"></label>
    <label>Transporte: <input type="number" id="transporte"></label>
    <label>Otros gastos fijos: <input type="number" id="otrosGastos"></label>
    <label>Ocio / gastos variables: <input type="number" id="ocio"></label>

    <h2>Activos</h2>
    <label>Efectivo / cuentas corrientes: <input type="number" id="efectivo"></label>
    <label>Depósitos: <input type="number" id="depositos"></label>
    <label>Inversiones: <input type="number" id="inversiones"></label>
    <label>Valor de vivienda: <input type="number" id="valorVivienda"></label>
    <label>Otros bienes: <input type="number" id="otrosBienes"></label>

    <h2>Pasivos</h2>
    <label>Deuda hipotecaria: <input type="number" id="hipoteca"></label>
    <label>Otras deudas: <input type="number" id="otrasDeudas"></label>
    <label>Tarjetas de crédito: <input type="number" id="tarjetas"></label>

    <br>
    <button type="button" onclick="calcularRatios()">Calcular</button>
  </form>

  <div id="resultados"></div>

  <script>
    function calcularRatios() {
      const ingreso = +document.getElementById('ingresoFijo').value + +document.getElementById('ingresoVariable').value + +document.getElementById('ingresosPasivos').value;
      const gastos = +document.getElementById('vivienda').value + +document.getElementById('suministros').value + +document.getElementById('alimentacion').value + +document.getElementById('transporte').value + +document.getElementById('otrosGastos').value + +document.getElementById('ocio').value;
      const activos = +document.getElementById('efectivo').value + +document.getElementById('depositos').value + +document.getElementById('inversiones').value + +document.getElementById('valorVivienda').value + +document.getElementById('otrosBienes').value;
      const pasivos = +document.getElementById('hipoteca').value + +document.getElementById('otrasDeudas').value + +document.getElementById('tarjetas').value;
      const activosLiquidos = +document.getElementById('efectivo').value + +document.getElementById('depositos').value;

      const ahorro = (ingreso - gastos) / ingreso;
      const dti = gastos / ingreso;
      const activosPasivos = activos / pasivos;
      const patrimonio = activos - pasivos;
      const libertadFinanciera = activosLiquidos / gastos;
      const tasaInversion = (+document.getElementById('inversiones').value / ingreso);

      function formatRatio(value, ideal, comparison, description) {
        const color = comparison(value, ideal) ? 'good' : 'bad';
        return `<div class="ratio ${color}">${value.toFixed(2)} (Ideal: ${ideal})</div><div class="explanation">${description}</div>`;
      }

      document.getElementById('resultados').innerHTML = `
        <h2>Resultados</h2>
        <p><strong>Tasa de ahorro</strong> (Ideal >20%):
        ${formatRatio(ahorro, 0.2, (v, i) => v >= i, "Mide qué porcentaje de tus ingresos puedes ahorrar cada mes.")}</p>
        <p><strong>Relación deuda/ingreso (DTI)</strong> (Ideal <35%):
        ${formatRatio(dti, 0.35, (v, i) => v <= i, "Indica qué parte de tus ingresos se destina al pago de deudas.")}</p>
        <p><strong>Relación activos/pasivos</strong> (Ideal >2):
        ${formatRatio(activosPasivos, 2, (v, i) => v >= i, "Compara todo lo que tienes (activos) frente a lo que debes (pasivos).")}</p>
        <p><strong>Patrimonio neto:</strong>
        <span class="ratio">${patrimonio.toFixed(2)}</span>
        <div class="explanation">Es la diferencia entre tus activos y tus deudas. Muestra tu riqueza neta.</div></p>
        <p><strong>Índice de libertad financiera</strong> (Ideal >6 meses):
        ${formatRatio(libertadFinanciera, 6, (v, i) => v >= i, "Cuántos meses podrías mantener tu nivel de vida actual sin ingresos.")}</p>
        <p><strong>Tasa de inversión</strong> (Ideal 10–20%):
        ${formatRatio(tasaInversion, 0.1, (v, i) => v >= i && v <= 0.2, "Porcentaje de tus ingresos que destinas a invertir para tu futuro.")}</p>
      `;
    }
  </script>
</body>
</html>
